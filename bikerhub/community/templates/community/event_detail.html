{% extends "layouts.html" %}

{% block title %}{{ event.title }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <h1 class="card-title">{{ event.title }}</h1>
            <div class="mb-4">
                <p class="text-muted">
                    <i class="bi bi-geo-alt"></i> {{ event.location }}<br>
                    <i class="bi bi-calendar"></i> {{ event.date|date:"F j, Y" }}<br>
                    <i class="bi bi-person"></i> Hosted by: {{ event.host.username }}
                </p>
            </div>
            <div class="mb-4">
                <h5>Description</h5>
                <p>{{ event.description }}</p>
            </div>
            
            {% if user.is_authenticated %}
                {% if user in event.participants.all %}
                    <form method="post" action="{% url 'event-leave' event.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning">Leave Event</button>
                    </form>
                {% else %}
                    <form method="post" action="{% url 'event-join' event.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-success">Join Event</button>
                    </form>
                {% endif %}
            {% endif %}
            
            {% if user == event.host %}
            <div class="mt-3">
                <a href="{% url 'event-list' %}" class="btn btn-primary">Back to Events</a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}